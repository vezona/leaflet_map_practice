import{c as ft,L as H}from"./leaflet-src.js";import{i as X,l as mt,j as gt,o as K,c as j,g as z,k as Lt,m as vt,F as q,n as yt,t as wt}from"./vendor.js";import"./leaflet.ajax.js";import{_ as Ct}from"./index.js";const W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Q(l,n,a,o){let u,t,e;const i=n||[0],s=(a=a||0)>>>3,r=o===-1?3:0;for(u=0;u<l.length;u+=1)e=u+s,t=e>>>2,i.length<=t&&i.push(0),i[t]|=l[u]<<8*(r+o*(e%4));return{value:i,binLen:8*l.length+a}}function B(l,n,a){switch(n){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(l){case"HEX":return function(o,u,t){return function(e,i,s,r){let _,c,h,f;if(e.length%2!=0)throw new Error("String of HEX type must be in byte increments");const p=i||[0],g=(s=s||0)>>>3,v=r===-1?3:0;for(_=0;_<e.length;_+=2){if(c=parseInt(e.substr(_,2),16),isNaN(c))throw new Error("String of HEX type contains invalid characters");for(f=(_>>>1)+g,h=f>>>2;p.length<=h;)p.push(0);p[h]|=c<<8*(v+r*(f%4))}return{value:p,binLen:4*e.length+s}}(o,u,t,a)};case"TEXT":return function(o,u,t){return function(e,i,s,r,_){let c,h,f,p,g,v,y,M,w=0;const C=s||[0],A=(r=r||0)>>>3;if(i==="UTF8")for(y=_===-1?3:0,f=0;f<e.length;f+=1)for(c=e.charCodeAt(f),h=[],128>c?h.push(c):2048>c?(h.push(192|c>>>6),h.push(128|63&c)):55296>c||57344<=c?h.push(224|c>>>12,128|c>>>6&63,128|63&c):(f+=1,c=65536+((1023&c)<<10|1023&e.charCodeAt(f)),h.push(240|c>>>18,128|c>>>12&63,128|c>>>6&63,128|63&c)),p=0;p<h.length;p+=1){for(v=w+A,g=v>>>2;C.length<=g;)C.push(0);C[g]|=h[p]<<8*(y+_*(v%4)),w+=1}else for(y=_===-1?2:0,M=i==="UTF16LE"&&_!==1||i!=="UTF16LE"&&_===1,f=0;f<e.length;f+=1){for(c=e.charCodeAt(f),M===!0&&(p=255&c,c=p<<8|c>>>8),v=w+A,g=v>>>2;C.length<=g;)C.push(0);C[g]|=c<<8*(y+_*(v%4)),w+=2}return{value:C,binLen:8*w+r}}(o,n,u,t,a)};case"B64":return function(o,u,t){return function(e,i,s,r){let _,c,h,f,p,g,v,y=0;const M=i||[0],w=(s=s||0)>>>3,C=r===-1?3:0,A=e.indexOf("=");if(e.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(e=e.replace(/=/g,""),A!==-1&&A<e.length)throw new Error("Invalid '=' found in base-64 string");for(c=0;c<e.length;c+=4){for(p=e.substr(c,4),f=0,h=0;h<p.length;h+=1)_=W.indexOf(p.charAt(h)),f|=_<<18-6*h;for(h=0;h<p.length-1;h+=1){for(v=y+w,g=v>>>2;M.length<=g;)M.push(0);M[g]|=(f>>>16-8*h&255)<<8*(C+r*(v%4)),y+=1}}return{value:M,binLen:8*y+s}}(o,u,t,a)};case"BYTES":return function(o,u,t){return function(e,i,s,r){let _,c,h,f;const p=i||[0],g=(s=s||0)>>>3,v=r===-1?3:0;for(c=0;c<e.length;c+=1)_=e.charCodeAt(c),f=c+g,h=f>>>2,p.length<=h&&p.push(0),p[h]|=_<<8*(v+r*(f%4));return{value:p,binLen:8*e.length+s}}(o,u,t,a)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(o,u,t){return function(e,i,s,r){return Q(new Uint8Array(e),i,s,r)}(o,u,t,a)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(o,u,t){return Q(o,u,t,a)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function $(l,n,a,o){switch(l){case"HEX":return function(u){return function(t,e,i,s){let r,_,c="";const h=e/8,f=i===-1?3:0;for(r=0;r<h;r+=1)_=t[r>>>2]>>>8*(f+i*(r%4)),c+="0123456789abcdef".charAt(_>>>4&15)+"0123456789abcdef".charAt(15&_);return s.outputUpper?c.toUpperCase():c}(u,n,a,o)};case"B64":return function(u){return function(t,e,i,s){let r,_,c,h,f,p="";const g=e/8,v=i===-1?3:0;for(r=0;r<g;r+=3)for(h=r+1<g?t[r+1>>>2]:0,f=r+2<g?t[r+2>>>2]:0,c=(t[r>>>2]>>>8*(v+i*(r%4))&255)<<16|(h>>>8*(v+i*((r+1)%4))&255)<<8|f>>>8*(v+i*((r+2)%4))&255,_=0;_<4;_+=1)p+=8*r+6*_<=e?W.charAt(c>>>6*(3-_)&63):s.b64Pad;return p}(u,n,a,o)};case"BYTES":return function(u){return function(t,e,i){let s,r,_="";const c=e/8,h=i===-1?3:0;for(s=0;s<c;s+=1)r=t[s>>>2]>>>8*(h+i*(s%4))&255,_+=String.fromCharCode(r);return _}(u,n,a)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(u){return function(t,e,i){let s;const r=e/8,_=new ArrayBuffer(r),c=new Uint8Array(_),h=i===-1?3:0;for(s=0;s<r;s+=1)c[s]=t[s>>>2]>>>8*(h+i*(s%4))&255;return _}(u,n,a)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(u){return function(t,e,i){let s;const r=e/8,_=i===-1?3:0,c=new Uint8Array(r);for(s=0;s<r;s+=1)c[s]=t[s>>>2]>>>8*(_+i*(s%4))&255;return c}(u,n,a)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],E=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],P=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],O="Chosen SHA variant is not supported";function I(l,n){let a,o;const u=l.binLen>>>3,t=n.binLen>>>3,e=u<<3,i=4-u<<3;if(u%4!=0){for(a=0;a<t;a+=4)o=u+a>>>2,l.value[o]|=n.value[a>>>2]<<e,l.value.push(0),l.value[o+1]|=n.value[a>>>2]>>>i;return(l.value.length<<2)-4>=t+u&&l.value.pop(),{value:l.value,binLen:l.binLen+n.binLen}}return{value:l.value.concat(n.value),binLen:l.binLen+n.binLen}}function J(l){const n={outputUpper:!1,b64Pad:"=",outputLen:-1},a=l||{},o="Output length must be a multiple of 8";if(n.outputUpper=a.outputUpper||!1,a.b64Pad&&(n.b64Pad=a.b64Pad),a.outputLen){if(a.outputLen%8!=0)throw new Error(o);n.outputLen=a.outputLen}else if(a.shakeLen){if(a.shakeLen%8!=0)throw new Error(o);n.outputLen=a.shakeLen}if(typeof n.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof n.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return n}function T(l,n,a,o){const u=l+" must include a value and format";if(!n){if(!o)throw new Error(u);return o}if(n.value===void 0||!n.format)throw new Error(u);return B(n.format,n.encoding||"UTF8",a)(n.value)}class Z{constructor(n,a,o){const u=o||{};if(this.t=a,this.i=u.encoding||"UTF8",this.numRounds=u.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.s=n,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.H=[],this.S=[]}update(n){let a,o=0;const u=this.p>>>5,t=this.m(n,this.o,this.h),e=t.binLen,i=t.value,s=e>>>5;for(a=0;a<s;a+=u)o+this.p<=e&&(this.C=this.R(i.slice(a,a+u),this.C),o+=this.p);this.l+=o,this.o=i.slice(o>>>5),this.h=e%this.p,this.u=!0}getHash(n,a){let o,u,t=this.U;const e=J(a);if(this.v){if(e.outputLen===-1)throw new Error("Output length must be specified in options");t=e.outputLen}const i=$(n,t,this.K,e);if(this.A&&this.T)return i(this.T(e));for(u=this.F(this.o.slice(),this.h,this.l,this.g(this.C),t),o=1;o<this.numRounds;o+=1)this.v&&t%32!=0&&(u[u.length-1]&=16777215>>>24-t%32),u=this.F(u,t,0,this.B(this.s),t);return i(u)}setHMACKey(n,a,o){if(!this.L)throw new Error("Variant does not support HMAC");if(this.u)throw new Error("Cannot set MAC key after calling update");const u=B(a,(o||{}).encoding||"UTF8",this.K);this.M(u(n))}M(n){const a=this.p>>>3,o=a/4-1;let u;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(a<n.binLen/8&&(n.value=this.F(n.value,n.binLen,0,this.B(this.s),this.U));n.value.length<=o;)n.value.push(0);for(u=0;u<=o;u+=1)this.H[u]=909522486^n.value[u],this.S[u]=1549556828^n.value[u];this.C=this.R(this.H,this.C),this.l=this.p,this.A=!0}getHMAC(n,a){const o=J(a);return $(n,this.U,this.K,o)(this.k())}k(){let n;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");const a=this.F(this.o.slice(),this.h,this.l,this.g(this.C),this.U);return n=this.R(this.S,this.B(this.s)),n=this.F(a,this.U,this.p,n,this.U),n}}function x(l,n){return l<<n|l>>>32-n}function b(l,n){return l>>>n|l<<32-n}function tt(l,n){return l>>>n}function et(l,n,a){return l^n^a}function it(l,n,a){return l&n^~l&a}function nt(l,n,a){return l&n^l&a^n&a}function Mt(l){return b(l,2)^b(l,13)^b(l,22)}function k(l,n){const a=(65535&l)+(65535&n);return(65535&(l>>>16)+(n>>>16)+(a>>>16))<<16|65535&a}function At(l,n,a,o){const u=(65535&l)+(65535&n)+(65535&a)+(65535&o);return(65535&(l>>>16)+(n>>>16)+(a>>>16)+(o>>>16)+(u>>>16))<<16|65535&u}function Y(l,n,a,o,u){const t=(65535&l)+(65535&n)+(65535&a)+(65535&o)+(65535&u);return(65535&(l>>>16)+(n>>>16)+(a>>>16)+(o>>>16)+(u>>>16)+(t>>>16))<<16|65535&t}function kt(l){return b(l,7)^b(l,18)^tt(l,3)}function St(l){return b(l,6)^b(l,11)^b(l,25)}function bt(l){return[1732584193,4023233417,2562383102,271733878,3285377520]}function st(l,n){let a,o,u,t,e,i,s;const r=[];for(a=n[0],o=n[1],u=n[2],t=n[3],e=n[4],s=0;s<80;s+=1)r[s]=s<16?l[s]:x(r[s-3]^r[s-8]^r[s-14]^r[s-16],1),i=s<20?Y(x(a,5),it(o,u,t),e,1518500249,r[s]):s<40?Y(x(a,5),et(o,u,t),e,1859775393,r[s]):s<60?Y(x(a,5),nt(o,u,t),e,2400959708,r[s]):Y(x(a,5),et(o,u,t),e,3395469782,r[s]),e=t,t=u,u=x(o,30),o=a,a=i;return n[0]=k(a,n[0]),n[1]=k(o,n[1]),n[2]=k(u,n[2]),n[3]=k(t,n[3]),n[4]=k(e,n[4]),n}function Nt(l,n,a,o){let u;const t=15+(n+65>>>9<<4),e=n+a;for(;l.length<=t;)l.push(0);for(l[n>>>5]|=128<<24-n%32,l[t]=4294967295&e,l[t-1]=e/4294967296|0,u=0;u<l.length;u+=16)o=st(l.slice(u,u+16),o);return o}class Et extends Z{constructor(n,a,o){if(n!=="SHA-1")throw new Error(O);super(n,a,o);const u=o||{};this.L=!0,this.T=this.k,this.K=-1,this.m=B(this.t,this.i,this.K),this.R=st,this.g=function(t){return t.slice()},this.B=bt,this.F=Nt,this.C=[1732584193,4023233417,2562383102,271733878,3285377520],this.p=512,this.U=160,this.v=!1,u.hmacKey&&this.M(T("hmacKey",u.hmacKey,this.K))}}function rt(l){let n;return n=l=="SHA-224"?E.slice():P.slice(),n}function ot(l,n){let a,o,u,t,e,i,s,r,_,c,h;const f=[];for(a=n[0],o=n[1],u=n[2],t=n[3],e=n[4],i=n[5],s=n[6],r=n[7],h=0;h<64;h+=1)f[h]=h<16?l[h]:At(b(p=f[h-2],17)^b(p,19)^tt(p,10),f[h-7],kt(f[h-15]),f[h-16]),_=Y(r,St(e),it(e,i,s),m[h],f[h]),c=k(Mt(a),nt(a,o,u)),r=s,s=i,i=e,e=k(t,_),t=u,u=o,o=a,a=k(_,c);var p;return n[0]=k(a,n[0]),n[1]=k(o,n[1]),n[2]=k(u,n[2]),n[3]=k(t,n[3]),n[4]=k(e,n[4]),n[5]=k(i,n[5]),n[6]=k(s,n[6]),n[7]=k(r,n[7]),n}class Pt extends Z{constructor(n,a,o){if(n!=="SHA-224"&&n!=="SHA-256")throw new Error(O);super(n,a,o);const u=o||{};this.T=this.k,this.L=!0,this.K=-1,this.m=B(this.t,this.i,this.K),this.R=ot,this.g=function(t){return t.slice()},this.B=rt,this.F=function(t,e,i,s){return function(r,_,c,h,f){let p,g;const v=15+(_+65>>>9<<4),y=_+c;for(;r.length<=v;)r.push(0);for(r[_>>>5]|=128<<24-_%32,r[v]=4294967295&y,r[v-1]=y/4294967296|0,p=0;p<r.length;p+=16)h=ot(r.slice(p,p+16),h);return g=f==="SHA-224"?[h[0],h[1],h[2],h[3],h[4],h[5],h[6]]:h,g}(t,e,i,s,n)},this.C=rt(n),this.p=512,this.U=n==="SHA-224"?224:256,this.v=!1,u.hmacKey&&this.M(T("hmacKey",u.hmacKey,this.K))}}class d{constructor(n,a){this.Y=n,this.N=a}}function at(l,n){let a;return n>32?(a=64-n,new d(l.N<<n|l.Y>>>a,l.Y<<n|l.N>>>a)):n!==0?(a=32-n,new d(l.Y<<n|l.N>>>a,l.N<<n|l.Y>>>a)):l}function N(l,n){let a;return n<32?(a=32-n,new d(l.Y>>>n|l.N<<a,l.N>>>n|l.Y<<a)):(a=64-n,new d(l.N>>>n|l.Y<<a,l.Y>>>n|l.N<<a))}function ht(l,n){return new d(l.Y>>>n,l.N>>>n|l.Y<<32-n)}function Tt(l,n,a){return new d(l.Y&n.Y^l.Y&a.Y^n.Y&a.Y,l.N&n.N^l.N&a.N^n.N&a.N)}function Ut(l){const n=N(l,28),a=N(l,34),o=N(l,39);return new d(n.Y^a.Y^o.Y,n.N^a.N^o.N)}function S(l,n){let a,o;a=(65535&l.N)+(65535&n.N),o=(l.N>>>16)+(n.N>>>16)+(a>>>16);const u=(65535&o)<<16|65535&a;return a=(65535&l.Y)+(65535&n.Y)+(o>>>16),o=(l.Y>>>16)+(n.Y>>>16)+(a>>>16),new d((65535&o)<<16|65535&a,u)}function Bt(l,n,a,o){let u,t;u=(65535&l.N)+(65535&n.N)+(65535&a.N)+(65535&o.N),t=(l.N>>>16)+(n.N>>>16)+(a.N>>>16)+(o.N>>>16)+(u>>>16);const e=(65535&t)<<16|65535&u;return u=(65535&l.Y)+(65535&n.Y)+(65535&a.Y)+(65535&o.Y)+(t>>>16),t=(l.Y>>>16)+(n.Y>>>16)+(a.Y>>>16)+(o.Y>>>16)+(u>>>16),new d((65535&t)<<16|65535&u,e)}function xt(l,n,a,o,u){let t,e;t=(65535&l.N)+(65535&n.N)+(65535&a.N)+(65535&o.N)+(65535&u.N),e=(l.N>>>16)+(n.N>>>16)+(a.N>>>16)+(o.N>>>16)+(u.N>>>16)+(t>>>16);const i=(65535&e)<<16|65535&t;return t=(65535&l.Y)+(65535&n.Y)+(65535&a.Y)+(65535&o.Y)+(65535&u.Y)+(e>>>16),e=(l.Y>>>16)+(n.Y>>>16)+(a.Y>>>16)+(o.Y>>>16)+(u.Y>>>16)+(t>>>16),new d((65535&e)<<16|65535&t,i)}function G(l,n){return new d(l.Y^n.Y,l.N^n.N)}function Ht(l){const n=N(l,19),a=N(l,61),o=ht(l,6);return new d(n.Y^a.Y^o.Y,n.N^a.N^o.N)}function Ot(l){const n=N(l,1),a=N(l,8),o=ht(l,7);return new d(n.Y^a.Y^o.Y,n.N^a.N^o.N)}function Yt(l){const n=N(l,14),a=N(l,18),o=N(l,41);return new d(n.Y^a.Y^o.Y,n.N^a.N^o.N)}const Gt=[new d(m[0],3609767458),new d(m[1],602891725),new d(m[2],3964484399),new d(m[3],2173295548),new d(m[4],4081628472),new d(m[5],3053834265),new d(m[6],2937671579),new d(m[7],3664609560),new d(m[8],2734883394),new d(m[9],1164996542),new d(m[10],1323610764),new d(m[11],3590304994),new d(m[12],4068182383),new d(m[13],991336113),new d(m[14],633803317),new d(m[15],3479774868),new d(m[16],2666613458),new d(m[17],944711139),new d(m[18],2341262773),new d(m[19],2007800933),new d(m[20],1495990901),new d(m[21],1856431235),new d(m[22],3175218132),new d(m[23],2198950837),new d(m[24],3999719339),new d(m[25],766784016),new d(m[26],2566594879),new d(m[27],3203337956),new d(m[28],1034457026),new d(m[29],2466948901),new d(m[30],3758326383),new d(m[31],168717936),new d(m[32],1188179964),new d(m[33],1546045734),new d(m[34],1522805485),new d(m[35],2643833823),new d(m[36],2343527390),new d(m[37],1014477480),new d(m[38],1206759142),new d(m[39],344077627),new d(m[40],1290863460),new d(m[41],3158454273),new d(m[42],3505952657),new d(m[43],106217008),new d(m[44],3606008344),new d(m[45],1432725776),new d(m[46],1467031594),new d(m[47],851169720),new d(m[48],3100823752),new d(m[49],1363258195),new d(m[50],3750685593),new d(m[51],3785050280),new d(m[52],3318307427),new d(m[53],3812723403),new d(m[54],2003034995),new d(m[55],3602036899),new d(m[56],1575990012),new d(m[57],1125592928),new d(m[58],2716904306),new d(m[59],442776044),new d(m[60],593698344),new d(m[61],3733110249),new d(m[62],2999351573),new d(m[63],3815920427),new d(3391569614,3928383900),new d(3515267271,566280711),new d(3940187606,3454069534),new d(4118630271,4000239992),new d(116418474,1914138554),new d(174292421,2731055270),new d(289380356,3203993006),new d(460393269,320620315),new d(685471733,587496836),new d(852142971,1086792851),new d(1017036298,365543100),new d(1126000580,2618297676),new d(1288033470,3409855158),new d(1501505948,4234509866),new d(1607167915,987167468),new d(1816402316,1246189591)];function ut(l){return l==="SHA-384"?[new d(3418070365,E[0]),new d(1654270250,E[1]),new d(2438529370,E[2]),new d(355462360,E[3]),new d(1731405415,E[4]),new d(41048885895,E[5]),new d(3675008525,E[6]),new d(1203062813,E[7])]:[new d(P[0],4089235720),new d(P[1],2227873595),new d(P[2],4271175723),new d(P[3],1595750129),new d(P[4],2917565137),new d(P[5],725511199),new d(P[6],4215389547),new d(P[7],327033209)]}function lt(l,n){let a,o,u,t,e,i,s,r,_,c,h,f;const p=[];for(a=n[0],o=n[1],u=n[2],t=n[3],e=n[4],i=n[5],s=n[6],r=n[7],h=0;h<80;h+=1)h<16?(f=2*h,p[h]=new d(l[f],l[f+1])):p[h]=Bt(Ht(p[h-2]),p[h-7],Ot(p[h-15]),p[h-16]),_=xt(r,Yt(e),(v=i,y=s,new d((g=e).Y&v.Y^~g.Y&y.Y,g.N&v.N^~g.N&y.N)),Gt[h],p[h]),c=S(Ut(a),Tt(a,o,u)),r=s,s=i,i=e,e=S(t,_),t=u,u=o,o=a,a=S(_,c);var g,v,y;return n[0]=S(a,n[0]),n[1]=S(o,n[1]),n[2]=S(u,n[2]),n[3]=S(t,n[3]),n[4]=S(e,n[4]),n[5]=S(i,n[5]),n[6]=S(s,n[6]),n[7]=S(r,n[7]),n}class Rt extends Z{constructor(n,a,o){if(n!=="SHA-384"&&n!=="SHA-512")throw new Error(O);super(n,a,o);const u=o||{};this.T=this.k,this.L=!0,this.K=-1,this.m=B(this.t,this.i,this.K),this.R=lt,this.g=function(t){return t.slice()},this.B=ut,this.F=function(t,e,i,s){return function(r,_,c,h,f){let p,g;const v=31+(_+129>>>10<<5),y=_+c;for(;r.length<=v;)r.push(0);for(r[_>>>5]|=128<<24-_%32,r[v]=4294967295&y,r[v-1]=y/4294967296|0,p=0;p<r.length;p+=32)h=lt(r.slice(p,p+32),h);return g=f==="SHA-384"?[(h=h)[0].Y,h[0].N,h[1].Y,h[1].N,h[2].Y,h[2].N,h[3].Y,h[3].N,h[4].Y,h[4].N,h[5].Y,h[5].N]:[h[0].Y,h[0].N,h[1].Y,h[1].N,h[2].Y,h[2].N,h[3].Y,h[3].N,h[4].Y,h[4].N,h[5].Y,h[5].N,h[6].Y,h[6].N,h[7].Y,h[7].N],g}(t,e,i,s,n)},this.C=ut(n),this.p=1024,this.U=n==="SHA-384"?384:512,this.v=!1,u.hmacKey&&this.M(T("hmacKey",u.hmacKey,this.K))}}const zt=[new d(0,1),new d(0,32898),new d(2147483648,32906),new d(2147483648,2147516416),new d(0,32907),new d(0,2147483649),new d(2147483648,2147516545),new d(2147483648,32777),new d(0,138),new d(0,136),new d(0,2147516425),new d(0,2147483658),new d(0,2147516555),new d(2147483648,139),new d(2147483648,32905),new d(2147483648,32771),new d(2147483648,32770),new d(2147483648,128),new d(0,32778),new d(2147483648,2147483658),new d(2147483648,2147516545),new d(2147483648,32896),new d(0,2147483649),new d(2147483648,2147516424)],It=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function D(l){let n;const a=[];for(n=0;n<5;n+=1)a[n]=[new d(0,0),new d(0,0),new d(0,0),new d(0,0),new d(0,0)];return a}function Zt(l){let n;const a=[];for(n=0;n<5;n+=1)a[n]=l[n].slice();return a}function F(l,n){let a,o,u,t;const e=[],i=[];if(l!==null)for(o=0;o<l.length;o+=2)n[(o>>>1)%5][(o>>>1)/5|0]=G(n[(o>>>1)%5][(o>>>1)/5|0],new d(l[o+1],l[o]));for(a=0;a<24;a+=1){for(t=D(),o=0;o<5;o+=1)e[o]=(s=n[o][0],r=n[o][1],_=n[o][2],c=n[o][3],h=n[o][4],new d(s.Y^r.Y^_.Y^c.Y^h.Y,s.N^r.N^_.N^c.N^h.N));for(o=0;o<5;o+=1)i[o]=G(e[(o+4)%5],at(e[(o+1)%5],1));for(o=0;o<5;o+=1)for(u=0;u<5;u+=1)n[o][u]=G(n[o][u],i[o]);for(o=0;o<5;o+=1)for(u=0;u<5;u+=1)t[u][(2*o+3*u)%5]=at(n[o][u],It[o][u]);for(o=0;o<5;o+=1)for(u=0;u<5;u+=1)n[o][u]=G(t[o][u],new d(~t[(o+1)%5][u].Y&t[(o+2)%5][u].Y,~t[(o+1)%5][u].N&t[(o+2)%5][u].N));n[0][0]=G(n[0][0],zt[a])}var s,r,_,c,h;return n}function ct(l){let n,a,o=0;const u=[0,0],t=[4294967295&l,l/4294967296&2097151];for(n=6;n>=0;n--)a=t[n>>2]>>>8*n&255,a===0&&o===0||(u[o+1>>2]|=a<<8*(o+1),o+=1);return o=o!==0?o:1,u[0]|=o,{value:o+1>4?u:[u[0]],binLen:8+8*o}}function V(l){return I(ct(l.binLen),l)}function _t(l,n){let a,o=ct(n);o=I(o,l);const u=n>>>2,t=(u-o.value.length%u)%u;for(a=0;a<t;a++)o.value.push(0);return o.value}class Ft extends Z{constructor(n,a,o){let u=6,t=0;super(n,a,o);const e=o||{};if(this.numRounds!==1){if(e.kmacKey||e.hmacKey)throw new Error("Cannot set numRounds with MAC");if(this.s==="CSHAKE128"||this.s==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.K=1,this.m=B(this.t,this.i,this.K),this.R=F,this.g=Zt,this.B=D,this.C=D(),this.v=!1,n){case"SHA3-224":this.p=t=1152,this.U=224,this.L=!0,this.T=this.k;break;case"SHA3-256":this.p=t=1088,this.U=256,this.L=!0,this.T=this.k;break;case"SHA3-384":this.p=t=832,this.U=384,this.L=!0,this.T=this.k;break;case"SHA3-512":this.p=t=576,this.U=512,this.L=!0,this.T=this.k;break;case"SHAKE128":u=31,this.p=t=1344,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"SHAKE256":u=31,this.p=t=1088,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"KMAC128":u=4,this.p=t=1344,this.I(o),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"KMAC256":u=4,this.p=t=1088,this.I(o),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"CSHAKE128":this.p=t=1344,u=this._(o),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"CSHAKE256":this.p=t=1088,u=this._(o),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;default:throw new Error(O)}this.F=function(i,s,r,_,c){return function(h,f,p,g,v,y,M){let w,C,A=0;const U=[],R=v>>>5,pt=f>>>5;for(w=0;w<pt&&f>=v;w+=R)g=F(h.slice(w,w+R),g),f-=v;for(h=h.slice(w),f%=v;h.length<R;)h.push(0);for(w=f>>>3,h[w>>2]^=y<<w%4*8,h[R-1]^=2147483648,g=F(h,g);32*U.length<M&&(C=g[A%5][A/5|0],U.push(C.N),!(32*U.length>=M));)U.push(C.Y),A+=1,64*A%v==0&&(F(null,g),A=0);return U}(i,s,0,_,t,u,c)},e.hmacKey&&this.M(T("hmacKey",e.hmacKey,this.K))}_(n,a){const o=function(t){const e=t||{};return{funcName:T("funcName",e.funcName,1,{value:[],binLen:0}),customization:T("Customization",e.customization,1,{value:[],binLen:0})}}(n||{});a&&(o.funcName=a);const u=I(V(o.funcName),V(o.customization));if(o.customization.binLen!==0||o.funcName.binLen!==0){const t=_t(u,this.p>>>3);for(let e=0;e<t.length;e+=this.p>>>5)this.C=this.R(t.slice(e,e+(this.p>>>5)),this.C),this.l+=this.p;return 4}return 31}I(n){const a=function(u){const t=u||{};return{kmacKey:T("kmacKey",t.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:T("Customization",t.customization,1,{value:[],binLen:0})}}(n||{});this._(n,a.funcName);const o=_t(V(a.kmacKey),this.p>>>3);for(let u=0;u<o.length;u+=this.p>>>5)this.C=this.R(o.slice(u,u+(this.p>>>5)),this.C),this.l+=this.p;this.A=!0}X(n){const a=I({value:this.o.slice(),binLen:this.h},function(o){let u,t,e=0;const i=[0,0],s=[4294967295&o,o/4294967296&2097151];for(u=6;u>=0;u--)t=s[u>>2]>>>8*u&255,t===0&&e===0||(i[e>>2]|=t<<8*e,e+=1);return e=e!==0?e:1,i[e>>2]|=e<<8*e,{value:e+1>4?i:[i[0]],binLen:8+8*e}}(n.outputLen));return this.F(a.value,a.binLen,this.l,this.g(this.C),n.outputLen)}}class Kt{constructor(n,a,o){if(n=="SHA-1")this.O=new Et(n,a,o);else if(n=="SHA-224"||n=="SHA-256")this.O=new Pt(n,a,o);else if(n=="SHA-384"||n=="SHA-512")this.O=new Rt(n,a,o);else{if(n!="SHA3-224"&&n!="SHA3-256"&&n!="SHA3-384"&&n!="SHA3-512"&&n!="SHAKE128"&&n!="SHAKE256"&&n!="CSHAKE128"&&n!="CSHAKE256"&&n!="KMAC128"&&n!="KMAC256")throw new Error(O);this.O=new Ft(n,a,o)}}update(n){this.O.update(n)}getHash(n,a){return this.O.getHash(n,a)}setHMACKey(n,a,o){this.O.setHMACKey(n,a,o)}getHMAC(n,a){return this.O.getHMAC(n,a)}}function jt(){let l="05308bdea7aa47d58b246bd2412c3bdd",n="keE6SBYMXwKKTj8HWMexbSiRAZg",a=new Date().toGMTString(),o=new Kt("SHA-1","TEXT");o.setHMACKey(n,"TEXT"),o.update("x-date: "+a);let u=o.getHMAC("B64");return{Authorization:'hmac username="'+l+'", algorithm="hmac-sha1", headers="x-date", signature="'+u+'"',"X-Date":a}}var dt={exports:{}};(function(l,n){(function(a,o){o(n)})(ft,function(a){var o=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):(t.getLatLng?this._map?t.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow())):(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t})):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t})),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i,s=this._featureGroup,r=this._nonPointGroup,_=this.options.chunkedLoading,c=this.options.chunkInterval,h=this.options.chunkProgress,f=t.length,p=0,g=!0;if(this._map){var v=new Date().getTime(),y=L.bind(function(){var w=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();p<f;p++){if(_&&p%200==0){var C=new Date().getTime()-w;if(c<C)break}if((i=t[p])instanceof L.LayerGroup)g&&(t=t.slice(),g=!1),this._extractNonGroupLayers(i,t),f=t.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),e||this.fire("layeradd",{layer:i}),i.__parent&&i.__parent.getChildCount()===2)){var A=i.__parent.getAllChildMarkers(),U=A[0]===i?A[1]:A[0];s.removeLayer(U)}}else r.addLayer(i),e||this.fire("layeradd",{layer:i})}h&&h(p,f,new Date().getTime()-v),p===f?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(y,this.options.chunkDelay)},this);y()}else for(var M=this._needsClustering;p<f;p++)(i=t[p])instanceof L.LayerGroup?(g&&(t=t.slice(),g=!1),this._extractNonGroupLayers(i,t),f=t.length):i.getLatLng?this.hasLayer(i)||M.push(i):r.addLayer(i);return this},removeLayers:function(t){var e,i,s=t.length,r=this._featureGroup,_=this._nonPointGroup,c=!0;if(!this._map){for(e=0;e<s;e++)(i=t[e])instanceof L.LayerGroup?(c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),s=t.length):(this._arraySplice(this._needsClustering,i),_.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var h=t.slice(),f=s;for(e=0;e<f;e++)(i=h[e])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,h),f=h.length):this._unspiderfyLayer(i)}for(e=0;e<s;e++)(i=t[e])instanceof L.LayerGroup?(c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),s=t.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),r.hasLayer(i)&&(r.removeLayer(i),i.clusterShow&&i.clusterShow())):(_.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;0<=e;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,s,r,_=this._needsClustering.slice(),c=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(_),s=_.length-1;0<=s;s--){for(i=!0,r=c.length-1;0<=r;r--)if(c[r].layer===_[s]){i=!1;break}i&&t.call(e,_[s])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;0<=e;e--)if(i[e]===t)return!0;for(e=(i=this._needsRemoving).length-1;0<=e;e--)if(i[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;typeof e!="function"&&(e=function(){});var s=function(){!i.hasLayer(t)&&!i.hasLayer(t.__parent)||this._inZoomAnimation||(this._map.off("moveend",s,this),this.off("animationend",s,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",s,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",s,this),this.on("animationend",s,this),t.__parent.zoomToBounds())},onAdd:function(t){var e,i,s;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)(s=this._needsRemoving[e]).newlatlng=s.layer._latlng,s.layer._latlng=s.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)s=this._needsRemoving[e],this._removeLayer(s.layer,!0),s.layer._latlng=s.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;0<=i;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,s=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());r<=e&&s[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var s=this._gridClusters,r=this._gridUnclustered,_=this._featureGroup,c=this._map,h=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var f,p=t.__parent,g=p._markers;for(this._arraySplice(g,t);p&&(p._childCount--,p._boundsNeedUpdate=!0,!(p._zoom<h));)e&&p._childCount<=1?(f=p._markers[0]===t?p._markers[1]:p._markers[0],s[p._zoom].removeObject(p,c.project(p._cLatLng,p._zoom)),r[p._zoom].addObject(f,c.project(f.getLatLng(),p._zoom)),this._arraySplice(p.__parent._childClusters,p),p.__parent._markers.push(f),f.__parent=p.__parent,p._icon&&(_.removeLayer(p),i||_.addLayer(f))):p._iconNeedsUpdate=!0,p=p.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,s=this.options.zoomToBoundsOnClick,r=this.options.spiderfyOnEveryZoom;(e||s||r)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;if(t.type!=="clusterkeypress"||!t.originalEvent||t.originalEvent.keyCode===13){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),this.options.spiderfyOnEveryZoom&&e.spiderfy(),t.originalEvent&&t.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),2<t.layer.getChildCount()&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,s=this.options.spiderfyOnEveryZoom,r=this._map;(t||i||s)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),r.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,s=i;typeof i!="function"&&(s=function(){return i}),this.options.disableClusteringAtZoom!==null&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var r=t;e<=r;r--)this._gridClusters[r]=new L.DistanceGrid(s(r)),this._gridUnclustered[r]=new L.DistanceGrid(s(r));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,s,r=this._gridClusters,_=this._gridUnclustered,c=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);c<=e;e--){i=this._map.project(t.getLatLng(),e);var h=r[e].getNearObject(i);if(h)return h._addChild(t),void(t.__parent=h);if(h=_[e].getNearObject(i)){var f=h.__parent;f&&this._removeLayer(h,!1);var p=new this._markerCluster(this,e,h,t);r[e].addObject(p,this._map.project(p._cLatLng,e)),h.__parent=p;var g=t.__parent=p;for(s=e-1;s>f._zoom;s--)g=new this._markerCluster(this,s,g),r[s].addObject(g,this._map.project(h.getLatLng(),s));return f._addChild(g),void this._removeFromGridUnclustered(h,e)}_[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return e!==void 0&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(e._childCount===2){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,s=t.getLayers(),r=0;for(e=e||[];r<s.length;r++)(i=s[r])instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i,s=this._getExpandedVisibleBounds(),r=this._featureGroup,_=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(s,t,_,function(c){var h,f=c._latlng,p=c._markers;for(s.contains(f)||(f=null),c._isSingleParent()&&t+1===e?(r.removeLayer(c),c._recursivelyAddChildrenToMap(null,e,s)):(c.clusterHide(),c._recursivelyAddChildrenToMap(f,e,s)),i=p.length-1;0<=i;i--)h=p[i],s.contains(h._latlng)||r.removeLayer(h)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,e),r.eachLayer(function(c){c instanceof L.MarkerCluster||!c._icon||c.clusterShow()}),this._topClusterLevel._recursively(s,t,e,function(c){c._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,t,_,function(c){r.removeLayer(c),c.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,s=this._featureGroup;s.addLayer(t),e!==t&&(2<e._childCount?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){s.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var s=this._getExpandedVisibleBounds(),r=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(s,r,e+1,i);var _=this;this._forceLayout(),t._recursivelyBecomeVisible(s,i),this._enqueue(function(){if(t._childCount===1){var c=t._markers[0];this._ignoreMove=!0,c.setLatLng(c.getLatLng()),this._ignoreMove=!1,c.clusterShow&&c.clusterShow()}else t._recursively(s,i,r,function(h){h._recursivelyRemoveChildrenFromMap(s,r,e+1)});_._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var u=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,s){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),s&&this._addChild(s)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i].getAllChildMarkers(t,e);for(var s=this._markers.length-1;0<=s;s--)e&&this._markers[s].__dragStart||t.push(this._markers[s]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,i=this._childClusters.slice(),s=this._group._map,r=s.getBoundsZoom(this._bounds),_=this._zoom+1,c=s.getZoom();0<i.length&&_<r;){_++;var h=[];for(e=0;e<i.length;e++)h=h.concat(i[e]._childClusters);i=h}_<r?this._group._map.setView(this._latlng,_):r<=c?this._group._map.setView(this._latlng,c+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,s,r=this._markers,_=this._childClusters,c=0,h=0,f=this._childCount;if(f!==0){for(this._resetBounds(),t=0;t<r.length;t++)i=r[t]._latlng,this._bounds.extend(i),c+=i.lat,h+=i.lng;for(t=0;t<_.length;t++)(e=_[t])._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),i=e._wLatLng,s=e._childCount,c+=i.lat*s,h+=i.lng*s;this._latlng=this._wLatLng=new L.LatLng(c/f,h/f),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,function(s){var r,_,c=s._markers;for(r=c.length-1;0<=r;r--)(_=c[r])._icon&&(_._setPos(e),_.clusterHide())},function(s){var r,_,c=s._childClusters;for(r=c.length-1;0<=r;r--)(_=c[r])._icon&&(_._setPos(e),_.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,s){this._recursively(t,s,e,function(r){r._recursivelyAnimateChildrenIn(t,r._group._map.latLngToLayerPoint(r.getLatLng()).round(),i),r._isSingleParent()&&i-1===s?(r.clusterShow(),r._recursivelyRemoveChildrenFromMap(t,e,i)):r.clusterHide(),r._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,function(s){if(e!==s._zoom)for(var r=s._markers.length-1;0<=r;r--){var _=s._markers[r];i.contains(_._latlng)&&(t&&(_._backupLatlng=_.getLatLng(),_.setLatLng(t),_.clusterHide&&_.clusterHide()),s._group._featureGroup.addLayer(_))}},function(s){s._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;0<=e;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var s=this._childClusters.length-1;0<=s;s--)this._childClusters[s]._restorePosition();else for(var r=this._childClusters.length-1;0<=r;r--)this._childClusters[r]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,s){var r,_;this._recursively(t,e-1,i-1,function(c){for(_=c._markers.length-1;0<=_;_--)r=c._markers[_],s&&s.contains(r._latlng)||(c._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())},function(c){for(_=c._childClusters.length-1;0<=_;_--)r=c._childClusters[_],s&&s.contains(r._latlng)||(c._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())})},_recursively:function(t,e,i,s,r){var _,c,h=this._childClusters,f=this._zoom;if(e<=f&&(s&&s(this),r&&f===i&&r(this)),f<e||f<i)for(_=h.length-1;0<=_;_--)(c=h[_])._boundsNeedUpdate&&c._recalculateBounds(),t.intersects(c._bounds)&&c._recursively(t,e,i,s,r)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),s=this._getCoord(e.y),r=this._grid,_=r[s]=r[s]||{},c=_[i]=_[i]||[],h=L.Util.stamp(t);this._objectPoint[h]=e,c.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,s,r=this._getCoord(e.x),_=this._getCoord(e.y),c=this._grid,h=c[_]=c[_]||{},f=h[r]=h[r]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,s=f.length;i<s;i++)if(f[i]===t)return f.splice(i,1),s===1&&delete h[r],!0},eachObject:function(t,e){var i,s,r,_,c,h,f=this._grid;for(i in f)for(s in c=f[i])for(r=0,_=(h=c[s]).length;r<_;r++)t.call(e,h[r])&&(r--,_--)},getNearObject:function(t){var e,i,s,r,_,c,h,f,p=this._getCoord(t.x),g=this._getCoord(t.y),v=this._objectPoint,y=this._sqCellSize,M=null;for(e=g-1;e<=g+1;e++)if(r=this._grid[e]){for(i=p-1;i<=p+1;i++)if(_=r[i])for(s=0,c=_.length;s<c;s++)h=_[s],((f=this._sqDist(v[L.Util.stamp(h)],t))<y||f<=y&&M===null)&&(y=f,M=h)}return M},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,s=e.y-t.y;return i*i+s*s}},L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,s,r,_=0,c=null,h=[];for(i=e.length-1;0<=i;i--)s=e[i],0<(r=this.getDistant(s,t))&&(h.push(s),_<r&&(_=r,c=s));return{maxPoint:c,newPoints:h}},buildConvexHull:function(t,e){var i=[],s=this.findMostDistantPointFromBaseLine(t,e);return s.maxPoint?i=(i=i.concat(this.buildConvexHull([t[0],s.maxPoint],s.newPoints))).concat(this.buildConvexHull([s.maxPoint,t[1]],s.newPoints)):[t[0]]},getConvexHull:function(t){var e,i=!1,s=!1,r=!1,_=!1,c=null,h=null,f=null,p=null,g=null,v=null;for(e=t.length-1;0<=e;e--){var y=t[e];(i===!1||y.lat>i)&&(i=(c=y).lat),(s===!1||y.lat<s)&&(s=(h=y).lat),(r===!1||y.lng>r)&&(r=(f=y).lng),(_===!1||y.lng<_)&&(_=(p=y).lng)}return g=s!==i?(v=h,c):(v=p,f),[].concat(this.buildConvexHull([v,g],t),this.buildConvexHull([g,v],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),s=[];for(e=i.length-1;0<=e;e--)t=i[e].getLatLng(),s.push(t);return L.QuickHull.getConvexHull(s)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),t=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(e.length,i):e.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(e.length,i):(i.y+=10,this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,s,r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,_=this._2PI/t,c=[];for(r=Math.max(r,35),c.length=t,i=0;i<t;i++)s=this._circleStartAngle+i*_,c[i]=new L.Point(e.x+r*Math.cos(s),e.y+r*Math.sin(s))._round();return c},_generatePointsSpiral:function(t,e){var i,s=this._group.options.spiderfyDistanceMultiplier,r=s*this._spiralLengthStart,_=s*this._spiralFootSeparation,c=s*this._spiralLengthFactor*this._2PI,h=0,f=[];for(i=f.length=t;0<=i;i--)i<t&&(f[i]=new L.Point(e.x+r*Math.cos(h),e.y+r*Math.sin(h))._round()),r+=c/(h+=_/r+5e-4*i);return f},_noanimationUnspiderfy:function(){var t,e,i=this._group,s=i._map,r=i._featureGroup,_=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),e=_.length-1;0<=e;e--)t=_[e],r.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(s.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:_}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,s,r,_,c=this._group,h=c._map,f=c._featureGroup,p=this._group.options.spiderLegPolylineOptions;for(c._ignoreMove=!0,i=0;i<t.length;i++)_=h.layerPointToLatLng(e[i]),s=t[i],r=new L.Polyline([this._latlng,_],p),h.addLayer(r),s._spiderLeg=r,s._preSpiderfyLatlng=s._latlng,s.setLatLng(_),s.setZIndexOffset&&s.setZIndexOffset(1e6),f.addLayer(s);this.setOpacity(.3),c._ignoreMove=!1,c.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,s,r,_,c,h,f=this,p=this._group,g=p._map,v=p._featureGroup,y=this._latlng,M=g.latLngToLayerPoint(y),w=L.Path.SVG,C=L.extend({},this._group.options.spiderLegPolylineOptions),A=C.opacity;for(A===void 0&&(A=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),w?(C.opacity=0,C.className=(C.className||"")+" leaflet-cluster-spider-leg"):C.opacity=A,p._ignoreMove=!0,i=0;i<t.length;i++)s=t[i],h=g.layerPointToLatLng(e[i]),r=new L.Polyline([y,h],C),g.addLayer(r),s._spiderLeg=r,w&&(c=(_=r._path).getTotalLength()+.1,_.style.strokeDasharray=c,_.style.strokeDashoffset=c),s.setZIndexOffset&&s.setZIndexOffset(1e6),s.clusterHide&&s.clusterHide(),v.addLayer(s),s._setPos&&s._setPos(M);for(p._forceLayout(),p._animationStart(),i=t.length-1;0<=i;i--)h=g.layerPointToLatLng(e[i]),(s=t[i])._preSpiderfyLatlng=s._latlng,s.setLatLng(h),s.clusterShow&&s.clusterShow(),w&&((_=(r=s._spiderLeg)._path).style.strokeDashoffset=0,r.setStyle({opacity:A}));this.setOpacity(.3),p._ignoreMove=!1,setTimeout(function(){p._animationEnd(),p.fire("spiderfied",{cluster:f,markers:t})},200)},_animationUnspiderfy:function(t){var e,i,s,r,_,c,h=this,f=this._group,p=f._map,g=f._featureGroup,v=t?p._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):p.latLngToLayerPoint(this._latlng),y=this.getAllChildMarkers(null,!0),M=L.Path.SVG;for(f._ignoreMove=!0,f._animationStart(),this.setOpacity(1),i=y.length-1;0<=i;i--)(e=y[i])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,c=!0,e._setPos&&(e._setPos(v),c=!1),e.clusterHide&&(e.clusterHide(),c=!1),c&&g.removeLayer(e),M&&(_=(r=(s=e._spiderLeg)._path).getTotalLength()+.1,r.style.strokeDashoffset=_,s.setStyle({opacity:0})));f._ignoreMove=!1,setTimeout(function(){var w=0;for(i=y.length-1;0<=i;i--)(e=y[i])._spiderLeg&&w++;for(i=y.length-1;0<=i;i--)(e=y[i])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),1<w&&g.removeLayer(e),p.removeLayer(e._spiderLeg),delete e._spiderLeg);f._animationEnd(),f.fire("unspiderfied",{cluster:h,markers:y})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),a.MarkerClusterGroup=o,a.MarkerCluster=u,Object.defineProperty(a,"__esModule",{value:!0})})})(dt,dt.exports);const Dt=[{name:"\u53F0\u5317",value:"Taipei"},{name:"\u65B0\u5317",value:"NewTaipei"},{name:"\u6843\u5712",value:"Taoyuan"},{name:"\u65B0\u7AF9",value:"Hsinchu"},{name:"\u82D7\u6817",value:"MiaoliCounty"},{name:"\u53F0\u4E2D",value:"Taichung"},{name:"\u5609\u7FA9",value:"Chiayi"},{name:"\u53F0\u5357",value:"Tainan"},{name:"\u9AD8\u96C4",value:"Kaohsiung"},{name:"\u5C4F\u6771",value:"PingtungCounty"},{name:"\u91D1\u9580",value:"KinmenCounty"}];var Vt="/leaflet_map_practice/assets/bike.svg";const Xt={setup(){const l=X(""),n=X([]),a=async s=>{const _=await(await fetch(`https://ptx.transportdata.tw/MOTC/v2/${s}`,{headers:jt()})).json();n.value=_,i(n.value)};mt(l,()=>{a(`Bike/Station/${l.value}?&format=JSON`)});let o,u,t;const e=()=>{const s=[25.0263064,121.5262934];o=H.map("map",{zoomControl:!1,attributionControl:!1}).setView(s,10),u=H.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),o.addLayer(u),t=H.markerClusterGroup().addTo(o)};function i(s){t.clearLayers(),s.forEach(r=>{const _=H.icon({iconUrl:Vt,iconSize:[40,40]}),c=r.StationName.Zh_tw,h=r.StationPosition.PositionLat,f=r.StationPosition.PositionLon,p=H.marker([h,f],{icon:_}).bindPopup(c);t.addLayer(p)}),o.fitBounds(t.getBounds())}return gt(()=>{e()}),{cityList:Dt,chosedCity:l,bikeStations:n}}},qt=z("div",{id:"map"},null,-1),Wt={class:"selector"},Qt=z("option",{value:"",disabled:""}," \u8ACB\u9078\u64C7\u5340\u57DF",-1),$t=["value"];function Jt(l,n,a,o,u,t){return K(),j(q,null,[qt,z("div",Wt,[Lt(z("select",{name:"",id:"","onUpdate:modelValue":n[0]||(n[0]=e=>o.chosedCity=e)},[Qt,(K(!0),j(q,null,yt(o.cityList,e=>(K(),j("option",{key:e.value,value:e.value},wt(e.name),9,$t))),128))],512),[[vt,o.chosedCity]])])],64)}var se=Ct(Xt,[["render",Jt]]);export{se as default};
