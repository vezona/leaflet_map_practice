import{L as n}from"./leaflet-src.js";import"./leaflet.draw.js";import{_ as m}from"./index.js";import{i as w,j as g,o as h,c as y,g as l,p as j,f as v}from"./vendor.js";const F={setup(){let e,o;const i=()=>{e=n.map("map",{center:[25.0263064,121.5262934],zoom:10}),e.zoomControl.setPosition("bottomright"),n.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>contributors'}).addTo(e),o=new n.FeatureGroup,o.addTo(e);const a=new n.Control.Draw({position:"topright",draw:{rectangle:{showArea:!1}},edit:{featureGroup:o}});e.addControl(a),e.on("draw:created",function(t){const d=t.layer;o.addLayer(d)})},r=a=>{let t=a.target.files[0],d=new FileReader;d.readAsText(t),d.onload=()=>{const _=JSON.parse(d.result),f=n.geoJSON(_,{onEachFeature:p,pointToLayer:c});e.fitBounds(f.getBounds())}};function p(a,t){console.log("layer",t),o.addLayer(t)}function c(a,t){return console.log(a.properties.name),a.properties.name!==void 0?n.circleMarker(t,{radius:20,color:"deeppink"}).bindTooltip(`<p>${a.properties.name}</p>`):n.marker(t)}const s=w(),u=()=>{s.value="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o.toGeoJSON()))};return g(()=>{i()}),{uploadFile:r,jsonObj:s,downloadFile:u}}},S=e=>(j("data-v-2462a02a"),e=e(),v(),e),O={class:"wrap"},x=S(()=>l("div",{id:"map"},null,-1)),k={class:"geoJson_info"},C=["href"];function I(e,o,i,r,p,c){return h(),y("div",O,[x,l("div",k,[l("input",{type:"file",onChange:o[0]||(o[0]=(...s)=>r.uploadFile&&r.uploadFile(...s))},null,32),l("a",{href:r.jsonObj,download:"data.geojson",class:"downloadGeoJSON",onClick:o[1]||(o[1]=(...s)=>r.downloadFile&&r.downloadFile(...s))},"\u4E0B\u8F09GeoJSON\u6A94\u6848",8,C)])])}var G=m(F,[["render",I],["__scopeId","data-v-2462a02a"]]);export{G as default};
